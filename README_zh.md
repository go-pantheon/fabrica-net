<div align="center">
  <h1>ğŸ›ï¸ FABRICA NET</h1>
  <p><em>é¢å‘ go-pantheon ç”Ÿæ€ç³»ç»Ÿçš„é«˜æ€§èƒ½å¤šåè®®ç½‘ç»œåº“</em></p>
</div>

<p align="center">
<a href="https://github.com/go-pantheon/fabrica-net/actions/workflows/test.yml"><img src="https://github.com/go-pantheon/fabrica-net/workflows/Test/badge.svg" alt="Test Status"></a>
<a href="https://github.com/go-pantheon/fabrica-net/releases"><img src="https://img.shields.io/github/v/release/go-pantheon/fabrica-net" alt="Latest Release"></a>
<a href="https://pkg.go.dev/github.com/go-pantheon/fabrica-net"><img src="https://pkg.go.dev/badge/github.com/go-pantheon/fabrica-net" alt="GoDoc"></a>
<a href="https://goreportcard.com/report/github.com/go-pantheon/fabrica-net"><img src="https://goreportcard.com/badge/github.com/go-pantheon/fabrica-net" alt="Go Report Card"></a>
<a href="https://github.com/go-pantheon/fabrica-net/blob/main/LICENSE"><img src="https://img.shields.io/github/license/go-pantheon/fabrica-net" alt="License"></a>
<a href="https://deepwiki.com/go-pantheon/fabrica-net"><img src="https://deepwiki.com/badge.svg" alt="Ask DeepWiki"></a>
</p>

> **è¯­è¨€**: [English](README.md) | [ä¸­æ–‡](README_zh.md)

## å…³äº Fabrica Net

Fabrica Net æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€ä¼ä¸šçº§ç½‘ç»œåº“ï¼Œä¸“ä¸º [go-pantheon/janus](https://github.com/go-pantheon/janus) ç½‘å…³æœåŠ¡è®¾è®¡ã€‚å®ƒä¸ºæ¸¸æˆæœåŠ¡å™¨åŸºç¡€è®¾æ–½æä¾›å®‰å…¨çš„å¤šåè®®é€šä¿¡èƒ½åŠ›ï¼Œé…å¤‡é«˜çº§ä¼šè¯ç®¡ç†å’Œå®æ—¶ç›‘æ§åŠŸèƒ½ã€‚

æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ï¼š[deepwiki/go-pantheon/fabrica-net](https://deepwiki.com/go-pantheon/fabrica-net)

## å…³äº go-pantheon ç”Ÿæ€ç³»ç»Ÿ

**go-pantheon** æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„æ¸¸æˆæœåŠ¡å™¨æ¡†æ¶ï¼ŒåŸºäº [go-kratos](https://github.com/go-kratos/kratos) å¾®æœåŠ¡æ¶æ„æä¾›é«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„æ¸¸æˆæœåŠ¡å™¨é›†ç¾¤è§£å†³æ–¹æ¡ˆã€‚Fabrica Net ä½œä¸ºç½‘ç»œé€šä¿¡åŸºç¡€ï¼Œæ”¯æŒä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š

- **Roma**: æ¸¸æˆæ ¸å¿ƒé€»è¾‘æœåŠ¡
- **Janus**: ç½‘å…³æœåŠ¡ï¼Œè´Ÿè´£å®¢æˆ·ç«¯è¿æ¥å¤„ç†å’Œè¯·æ±‚è½¬å‘
- **Lares**: è´¦æˆ·æœåŠ¡ï¼Œè´Ÿè´£ç”¨æˆ·è®¤è¯å’Œè´¦æˆ·ç®¡ç†
- **Senate**: åå°ç®¡ç†æœåŠ¡ï¼Œæä¾›è¿è¥æ¥å£

### æ ¸å¿ƒç‰¹æ€§

- ğŸŒ **å¤šåè®®æ”¯æŒ**: TCPã€KCP å’Œ WebSocket ç»Ÿä¸€ API
- ğŸ”’ **ä¼ä¸šçº§å®‰å…¨**: ECDH å¯†é’¥äº¤æ¢ä¸ AES-GCM åŠ å¯†
- âš¡ **é«˜æ€§èƒ½**: å·¥ä½œæ± æ¶æ„ä¸é›¶æ‹·è´æ“ä½œ
- ğŸ“Š **ç›‘æ§ä¸å¯è§‚æµ‹æ€§**: Prometheus æŒ‡æ ‡å’Œåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª
- ğŸ”§ **ä¼šè¯ç®¡ç†**: å…¨é¢çš„ç”¨æˆ·ä¼šè¯ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ğŸ›¡ï¸ **è¿æ¥ç®¡ç†**: è‡ªåŠ¨é‡è¿ä¸å¿ƒè·³æ£€æµ‹
- ğŸ”„ **ä¼˜é›…å…³é—­**: å¸¦è¿æ¥æ’ç©ºçš„è¶…æ—¶æ§åˆ¶å…³é—­
- ğŸ¯ **è´Ÿè½½å‡è¡¡**: åŸºäºæƒé‡çš„è·¯ç”±ä¸å¥åº·æ£€æŸ¥

## ç½‘ç»œåè®®

### TCP æœåŠ¡å™¨ (`tcp/server/`)
é«˜æ€§èƒ½ TCP æœåŠ¡å™¨ï¼Œé‡‡ç”¨å·¥ä½œæ± æ¶æ„ï¼š
- Worker æ”¯æŒéé˜»å¡é›¶æ‹·è´å¤„ç†å¹¶å‘è¿æ¥
- Worker ç®¡ç†å™¨é‡‡ç”¨ Bucket è¿æ¥å­˜å‚¨
- å¯é…ç½®çš„ç¼“å†²åŒºå¤§å°å’Œ TCP ä¿æ´»è®¾ç½®
- æ”¯æŒä¸­é—´ä»¶çš„è¿æ¥ç”Ÿå‘½å‘¨æœŸç®¡ç†
- å†…ç½®æ”¯æŒæ¨é€ã€ç»„æ’­å’Œå¹¿æ’­æ¶ˆæ¯

### TCP å®¢æˆ·ç«¯ (`tcp/client/`)
åŸºäºå¯¹è¯ç®¡ç†çš„ TCP å®¢æˆ·ç«¯ï¼š
- æ¯ä¸ªå®¢æˆ·ç«¯å•è¿æ¥ï¼Œé‡‡ç”¨å¸§å¼é€šä¿¡
- åŸºäºä¼šè¯çš„åŠ å¯†é€šä¿¡å’Œæ¡æ‰‹åè®®
- å¯¹è¯æŠ½è±¡è¿›è¡Œè¿æ¥çŠ¶æ€ç®¡ç†
- å¼‚æ­¥æ¥æ”¶é€šé“å¤„ç†å…¥ç«™æ¶ˆæ¯

### KCP æœåŠ¡å™¨ (`kcp/server/`)
é«˜æ€§èƒ½åŸºäº UDP çš„ KCP æœåŠ¡å™¨ï¼š
- ä½¿ç”¨ smux åœ¨å•ä¸ª UDP ä¼šè¯ä¸Šè¿›è¡Œæµå¤šè·¯å¤ç”¨
- å‰å‘çº é”™ (FEC) æ”¯æŒä»¥æé«˜å¯é æ€§
- å¯é…ç½®çš„ç¡®è®¤é—´éš”å’Œçª—å£å¤§å°
- é’ˆå¯¹ä½å»¶è¿Ÿã€ä¸å¯é ç½‘ç»œæ¡ä»¶è¿›è¡Œä¼˜åŒ–

### KCP å®¢æˆ·ç«¯ (`kcp/client/`)
å…·æœ‰å¯é æ€§ç‰¹æ€§çš„ KCP å®¢æˆ·ç«¯ï¼š
- è‡ªåŠ¨ ARQï¼ˆè‡ªåŠ¨é‡ä¼ è¯·æ±‚ï¼‰è¿›è¡Œä¸¢åŒ…æ¢å¤
- é’ˆå¯¹æ¸¸æˆä¼˜åŒ–çš„æ‹¥å¡æ§åˆ¶ç®—æ³•
- æ”¯æŒå¹¶å‘æ•°æ®æµçš„æµå¤šè·¯å¤ç”¨

### WebSocket æœåŠ¡å™¨ (`websocket/server/`)
åŸºäºè·¯å¾„è·¯ç”±çš„ WebSocket æœåŠ¡å™¨ï¼š
- å¸¦å¯é…ç½®è·¯å¾„çš„ HTTP å‡çº§å¤„ç†
- ä¸ç°æœ‰å·¥ä½œæ± æ¶æ„é›†æˆ
- æ”¯æŒæ–‡æœ¬å’ŒäºŒè¿›åˆ¶ WebSocket å¸§
- å…¼å®¹æ ‡å‡† WebSocket åè®® (RFC 6455)

### WebSocket å®¢æˆ·ç«¯ (`websocket/client/`)
WebSocket å®¢æˆ·ç«¯å®ç°ï¼š
- åŸºäº Gorilla WebSocket çš„å®ç°
- æ¶ˆæ¯å¸§å’Œåè®®åˆè§„æ€§
- ä¸ä¼šè¯ç®¡ç†ç³»ç»Ÿé›†æˆ

### ç½‘ç»œæŠ½è±¡ (`xnet/`)
æ ¸å¿ƒç½‘ç»œæŠ½è±¡å’Œå·¥å…·ï¼š
- **Session**: å¸¦åŠ å¯†å’ŒçŠ¶æ€ç®¡ç†çš„ç”¨æˆ·ä¼šè¯
- **Transport**: å¤šåè®®ä¼ è¾“å±‚å®ç°
- **Cryptor**: AES-GCM åŠ å¯†/è§£å¯†æ¥å£
- **ECDHable**: æ¤­åœ†æ›²çº¿ Diffie-Hellman å¯†é’¥äº¤æ¢

## æŠ€æœ¯æ ˆ

| æŠ€æœ¯/ç»„ä»¶           | ç”¨é€”           | ç‰ˆæœ¬    |
| ------------------- | -------------- | ------- |
| Go                  | ä¸»è¦å¼€å‘è¯­è¨€   | 1.24.4+ |
| go-kratos           | å¾®æœåŠ¡æ¡†æ¶     | v2.8.4  |
| fabrica-util        | é€šç”¨å·¥å…·åº“     | v0.0.35 |
| Prometheus          | æŒ‡æ ‡ä¸ç›‘æ§     | v1.22.0 |
| gRPC                | æœåŠ¡é—´é€šä¿¡     | v1.73.0 |
| golang.org/x/crypto | åŠ å¯†æ“ä½œ       | v0.40.0 |
| gorilla/websocket   | WebSocket å®ç° | v1.5.3  |
| xtaci/kcp-go        | KCP åè®®æ”¯æŒ   | v5.6.22 |
| xtaci/smux          | æµå¤šè·¯å¤ç”¨     | v1.5.34 |

## è¦æ±‚

- Go 1.24.4+

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
go get github.com/go-pantheon/fabrica-net
```

### åˆå§‹åŒ–å¼€å‘ç¯å¢ƒ

```bash
make init
```

### è¿è¡Œæµ‹è¯•

```bash
make test
```

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ TCP æœåŠ¡å™¨

```go
package main

import (
    "context"
    "log"
    "os"
    "os/signal"
    "syscall"

    tcp "github.com/go-pantheon/fabrica-net/tcp/server"
    "github.com/go-pantheon/fabrica-net/xnet"
)

type GameService struct{}

// Auth å¤„ç†å®¢æˆ·ç«¯è®¤è¯
func (s *GameService) Auth(ctx context.Context, in xnet.Pack) (out xnet.Pack, ss xnet.Session, err error) {
    // è®¤è¯é€»è¾‘
    userID := int64(12345) // ä»è®¤è¯æ•°æ®ä¸­æå–
    ss = xnet.NewSession(userID, "game", 1)

    return []byte("è®¤è¯æˆåŠŸ"), ss, nil
}

// Handle å¤„ç†å®¢æˆ·ç«¯æ¶ˆæ¯
func (s *GameService) Handle(ctx context.Context, ss xnet.Session, tm xnet.TunnelManager, in xnet.Pack) error {
    log.Printf("ä»ç”¨æˆ· %d æ”¶åˆ°æ¶ˆæ¯: %s", ss.UID(), string(in))
    return nil
}

// å…¶ä»–å¿…éœ€çš„ Service æ¥å£æ–¹æ³•...
func (s *GameService) TunnelType(mod int32) (int32, int, error) { return 1, 1, nil }
func (s *GameService) CreateAppTunnel(ctx context.Context, ss xnet.Session, tp int32, rid int64, w xnet.Worker) (xnet.AppTunnel, error) { return nil, nil }
func (s *GameService) OnConnected(ctx context.Context, ss xnet.Session) error { return nil }
func (s *GameService) OnDisconnect(ctx context.Context, ss xnet.Session) error { return nil }
func (s *GameService) Tick(ctx context.Context, ss xnet.Session) error { return nil }

func main() {
    service := &GameService{}

    srv, err := tcp.NewServer(":8080", service)
    if err != nil {
        log.Fatal(err)
    }

    ctx, cancel := context.WithCancel(context.Background())
    defer cancel()

    if err := srv.Start(ctx); err != nil {
        log.Fatal(err)
    }

    defer func() {
        if err := srv.Stop(ctx); err != nil {
            log.Printf("åœæ­¢æœåŠ¡å™¨å¤±è´¥: %+v", err)
        }
    }()

    // ç­‰å¾…ä¸­æ–­ä¿¡å·
    c := make(chan os.Signal, 1)
    signal.Notify(c, os.Interrupt, syscall.SIGTERM, syscall.SIGQUIT)
    <-c

    log.Printf("æœåŠ¡å™¨å·²åœæ­¢")
}
```

### TCP å®¢æˆ·ç«¯è¿æ¥

```go
package main

import (
    "context"
    "log"
    "time"

    tcp "github.com/go-pantheon/fabrica-net/tcp/client"
    "github.com/go-pantheon/fabrica-net/xnet"
)

func main() {
    // åˆ›å»ºå¸¦ ID å’Œç»‘å®šåœ°å€çš„ TCP å®¢æˆ·ç«¯
    client := tcp.NewClient(12345, tcp.Bind("localhost:8080"))

    // å¯åŠ¨è¿æ¥
    ctx, cancel := context.WithCancel(context.Background())
    defer cancel()

    if err := client.Start(ctx); err != nil {
        log.Fatal(err)
    }
    defer func() {
        if err := client.Stop(ctx); err != nil {
            log.Printf("åœæ­¢å®¢æˆ·ç«¯å¤±è´¥: %+v", err)
        }
    }()

    // å‘é€æ¶ˆæ¯
    message := xnet.Pack([]byte("ä½ å¥½æœåŠ¡å™¨!"))
    if err := client.Send(message); err != nil {
        log.Fatal(err)
    }

    // æ¥æ”¶æ¶ˆæ¯
    go func() {
        for data := range client.Receive() {
            log.Printf("æ”¶åˆ°æ¶ˆæ¯: %s", string(data))
        }
    }()

    // ä¿æŒå®¢æˆ·ç«¯è¿è¡Œ
    time.Sleep(time.Second * 5)
}
```

### ä¼šè¯ç®¡ç†ä¸åŠ å¯†

```go
package main

import (
    "log"
    "time"

    "github.com/go-pantheon/fabrica-net/xnet"
)

func main() {
    // ä½¿ç”¨é€‰é¡¹åˆ›å»ºåŠ å¯†ä¼šè¯
    key := []byte("0123456789abcdef0123456789abcdef")
    cryptor, err := xnet.NewCryptor(key)
    if err != nil {
        log.Fatal(err)
    }

    session := xnet.NewSession(12345, "game", 1,
        xnet.WithEncryptor(cryptor),
        xnet.WithSID(1),
        xnet.WithStartTime(time.Now().Unix()),
    )

    // åŠ å¯†æ•°æ®
    data := xnet.Pack([]byte("æ•æ„Ÿæ¸¸æˆæ•°æ®"))
    encrypted, err := session.Encrypt(data)
    if err != nil {
        log.Fatal(err)
    }

    // è§£å¯†æ•°æ®
    decrypted, err := session.Decrypt(encrypted)
    if err != nil {
        log.Fatal(err)
    }

    log.Printf("åŸå§‹æ•°æ®: %s, è§£å¯†å: %s", data, decrypted)
}
```

### KCP æœåŠ¡å™¨ç¤ºä¾‹

```go
package main

import (
    "context"
    "log"
    "os"
    "os/signal"
    "syscall"

    "github.com/go-pantheon/fabrica-net/kcp"
    "github.com/go-pantheon/fabrica-net/xnet"
)

func main() {
    service := &GameService{} // ä¸ TCP ç¤ºä¾‹ç›¸åŒçš„æœåŠ¡å®ç°

    srv, err := kcp.NewServer(":8081", service)
    if err != nil {
        log.Fatal(err)
    }

    ctx, cancel := context.WithCancel(context.Background())
    defer cancel()

    if err := srv.Start(ctx); err != nil {
        log.Fatal(err)
    }
    defer srv.Stop(ctx)

    // ç­‰å¾…ä¸­æ–­ä¿¡å·
    c := make(chan os.Signal, 1)
    signal.Notify(c, os.Interrupt, syscall.SIGTERM, syscall.SIGQUIT)
    <-c

    log.Printf("KCP æœåŠ¡å™¨å·²åœæ­¢")
}
```

### WebSocket æœåŠ¡å™¨ç¤ºä¾‹

```go
package main

import (
    "context"
    "log"
    "os"
    "os/signal"
    "syscall"

    "github.com/go-pantheon/fabrica-net/websocket"
    "github.com/go-pantheon/fabrica-net/xnet"
)

func main() {
    service := &GameService{} // ä¸ TCP ç¤ºä¾‹ç›¸åŒçš„æœåŠ¡å®ç°

    // åˆ›å»ºå¸¦è·¯å¾„çš„ WebSocket æœåŠ¡å™¨
    srv, err := websocket.NewServer(":8082", "/ws", service)
    if err != nil {
        log.Fatal(err)
    }

    ctx, cancel := context.WithCancel(context.Background())
    defer cancel()

    if err := srv.Start(ctx); err != nil {
        log.Fatal(err)
    }
    defer srv.Stop(ctx)

    // ç­‰å¾…ä¸­æ–­ä¿¡å·
    c := make(chan os.Signal, 1)
    signal.Notify(c, os.Interrupt, syscall.SIGTERM, syscall.SIGQUIT)
    <-c

    log.Printf("WebSocket æœåŠ¡å™¨å·²åœæ­¢")
}
```

### é…ç½®è®¾ç½®

```go
package main

import (
    "runtime"
    "time"

    "github.com/go-pantheon/fabrica-net/conf"
)

func main() {
    config := conf.Config{
        Server: conf.Server{
            WorkerSize:   runtime.NumCPU(),
            WriteBufSize: 30000,
            ReadBufSize:  30000,
            KeepAlive:    true,
        },
        Worker: conf.Worker{
            ReaderBufSize:         8192,
            ReplyChanSize:         1024,
            HandshakeTimeout:      time.Second * 10,
            RequestIdleTimeout:    time.Second * 60,
            WaitMainTunnelTimeout: time.Second * 30,
            StopTimeout:           time.Second * 3,
            TunnelGroupSize:       32,
            TickInterval:          time.Second * 10,
        },
        Bucket: conf.Bucket{
            BucketSize: 128,
        },
    }

    // é€šè¿‡æœåŠ¡å™¨é€‰é¡¹ä½¿ç”¨é…ç½®
    // srv, err := tcp.NewServer(":8080", service, tcp.WithConf(config))
}
```

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ tcp/                # TCP åè®®å®ç°
â”‚   â”œâ”€â”€ server/         # å¸¦å·¥ä½œæ± çš„ TCP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ client/         # å¸¦è‡ªåŠ¨é‡è¿çš„ TCP å®¢æˆ·ç«¯
â”‚   â””â”€â”€ frame/          # TCP å¸§ç¼–è§£ç å™¨
â”œâ”€â”€ kcp/                # KCPï¼ˆåŸºäº UDPï¼‰åè®®å®ç°
â”‚   â”œâ”€â”€ server/         # å¸¦ smux å¤šè·¯å¤ç”¨çš„ KCP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ client/         # KCP å®¢æˆ·ç«¯å®ç°
â”‚   â”œâ”€â”€ frame/          # KCP å¸§ç¼–è§£ç å™¨å’Œç»Ÿè®¡
â”‚   â””â”€â”€ util/           # KCP é…ç½®å·¥å…·
â”œâ”€â”€ websocket/          # WebSocket åè®®å®ç°
â”‚   â”œâ”€â”€ server/         # å¸¦è·¯å¾„è·¯ç”±çš„ WebSocket æœåŠ¡å™¨
â”‚   â”œâ”€â”€ client/         # WebSocket å®¢æˆ·ç«¯å®ç°
â”‚   â”œâ”€â”€ frame/          # WebSocket å¸§ç¼–è§£ç å™¨
â”‚   â””â”€â”€ wsconn/         # WebSocket è¿æ¥åŒ…è£…å™¨
â”œâ”€â”€ xnet/               # æ ¸å¿ƒç½‘ç»œæŠ½è±¡
â”‚   â”œâ”€â”€ session.go      # å¸¦åŠ å¯†çš„ä¼šè¯ç®¡ç†
â”‚   â”œâ”€â”€ transport.go    # å¤šåè®®ä¼ è¾“å±‚
â”‚   â”œâ”€â”€ crypto.go       # AES-GCM åŠ å¯†å®ç°
â”‚   â”œâ”€â”€ ecdh.go         # ECDH å¯†é’¥äº¤æ¢
â”‚   â”œâ”€â”€ service.go      # æœåŠ¡æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ tunnel.go       # åº”ç”¨éš§é“ç®¡ç†
â”‚   â”œâ”€â”€ worker.go       # å·¥ä½œè€…æ¥å£
â”‚   â””â”€â”€ network.go      # ç½‘ç»œå·¥å…·
â”œâ”€â”€ http/               # HTTP å·¥å…·
â”‚   â””â”€â”€ health/         # å¥åº·æ£€æŸ¥ç«¯ç‚¹
â”œâ”€â”€ internal/           # å†…éƒ¨å®ç°
â”‚   â”œâ”€â”€ codec.go        # ç¼–è§£ç å™¨æ¥å£
â”‚   â”œâ”€â”€ server.go       # åŸºç¡€æœåŠ¡å™¨å®ç°
â”‚   â”œâ”€â”€ client.go       # åŸºç¡€å®¢æˆ·ç«¯å®ç°
â”‚   â”œâ”€â”€ worker.go       # è¿æ¥å·¥ä½œè€…
â”‚   â”œâ”€â”€ workermanager.go    # å·¥ä½œæ± ç®¡ç†å™¨
â”‚   â”œâ”€â”€ tunnelmanager.go    # éš§é“ç”Ÿå‘½å‘¨æœŸç®¡ç†å™¨
â”‚   â”œâ”€â”€ ringpool/       # ç¯å½¢ç¼“å†²æ± å·¥å…·
â”‚   â””â”€â”€ util/           # å†…éƒ¨å·¥å…·ï¼ˆIPã€æˆªæ­¢æ—¶é—´ï¼‰
â”œâ”€â”€ server/             # æœåŠ¡å™¨é€‰é¡¹å’Œé…ç½®
â”œâ”€â”€ client/             # å®¢æˆ·ç«¯é€‰é¡¹å’Œé…ç½®
â”œâ”€â”€ codec/              # æ¶ˆæ¯ç¼–ç /è§£ç 
â”œâ”€â”€ conf/               # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ conf.go         # é…ç½®ç»“æ„
â””â”€â”€ example/            # ç¤ºä¾‹åº”ç”¨
    â”œâ”€â”€ tcp/            # TCP å®¢æˆ·ç«¯/æœåŠ¡å™¨ç¤ºä¾‹
    â”œâ”€â”€ kcp/            # KCP å®¢æˆ·ç«¯/æœåŠ¡å™¨ç¤ºä¾‹
    â”œâ”€â”€ websocket/      # WebSocket å®¢æˆ·ç«¯/æœåŠ¡å™¨ç¤ºä¾‹
    â”œâ”€â”€ message/        # é€šç”¨æ¶ˆæ¯å®šä¹‰
    â””â”€â”€ service/        # ç¤ºä¾‹æœåŠ¡å®ç°
```

## ä¸ go-pantheon ç»„ä»¶é›†æˆ

Fabrica Net ä¸“ä¸ºå…¶ä»– go-pantheon ç»„ä»¶å¯¼å…¥è€Œè®¾è®¡ï¼š

```go
import (
    // Janus ç½‘å…³çš„åè®®æœåŠ¡å™¨
    tcp "github.com/go-pantheon/fabrica-net/tcp/server"
    kcp "github.com/go-pantheon/fabrica-net/kcp"
    websocket "github.com/go-pantheon/fabrica-net/websocket"

    // ç”¨æˆ·è¿æ¥çš„ä¼šè¯ç®¡ç†
    "github.com/go-pantheon/fabrica-net/xnet"

    // è´Ÿè½½å‡è¡¡å™¨çš„å¥åº·æ£€æŸ¥
    "github.com/go-pantheon/fabrica-net/http/health"

    // é…ç½®ç®¡ç†
    "github.com/go-pantheon/fabrica-net/conf"
)
```

## å¼€å‘æŒ‡å—

### ç¯å¢ƒé…ç½®

é€šè¿‡ç¯å¢ƒå˜é‡é…ç½® fabrica-netï¼š

```bash
export REGION="us-west-1"           # éƒ¨ç½²åŒºåŸŸ
export ZONE="us-west-1a"            # å¯ç”¨åŒº
export DEPLOY_ENV="production"      # ç¯å¢ƒ (dev/staging/prod)
export ADDRS="10.0.1.100"          # æœåŠ¡å™¨å…¬ç½‘ IP åœ°å€
export WEIGHT="100"                 # è´Ÿè½½å‡è¡¡æƒé‡
export OFFLINE="false"              # ç¦»çº¿æ¨¡å¼æ ‡å¿—
```

### æµ‹è¯•

è¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
make test

# è¿è¡ŒåŸºå‡†æµ‹è¯•
make benchmark

# è¿è¡Œä»£ç æ£€æŸ¥
make lint
```

### è¿è¡Œç¤ºä¾‹

é¡¹ç›®åœ¨ `example/` ç›®å½•ä¸­åŒ…å«å…¨é¢çš„ç¤ºä¾‹ï¼š

```bash
# TCP ç¤ºä¾‹
cd example/tcp
make build-server && ./bin/server
make build-client && ./bin/client

# KCP ç¤ºä¾‹
cd example/kcp
make build-server && ./bin/server
make build-client && ./bin/client

# WebSocket ç¤ºä¾‹
cd example/websocket
make build-server && ./bin/server
make build-client && ./bin/client
```

### æ·»åŠ æ–°åè®®

æ·»åŠ æ–°ç½‘ç»œåè®®æ—¶ï¼š

1. åœ¨åè®®åç§°ä¸‹åˆ›å»ºæ–°åŒ…ï¼ˆå¦‚ `kcp/`ã€`websocket/`ï¼‰
2. å®ç°æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç»„ä»¶
3. éµå¾ªç°æœ‰ TCP å®ç°æ¨¡å¼
4. æ·»åŠ å…¨é¢çš„å•å…ƒæµ‹è¯•å’ŒåŸºå‡†æµ‹è¯•
5. ä½¿ç”¨ç¤ºä¾‹æ›´æ–°æ–‡æ¡£
6. ç¡®ä¿ä¸ç°æœ‰ `xnet` æŠ½è±¡çš„å…¼å®¹æ€§

### è´¡çŒ®æŒ‡å—

1. Fork æ­¤ä»“åº“
2. ä» `main` åˆ†æ”¯åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. å®ç°æ›´æ”¹å¹¶ç¼–å†™å…¨é¢çš„æµ‹è¯•
4. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡ä¸”ä»£ç æ£€æŸ¥æ— è¯¯
5. æ›´æ–°ä»»ä½• API æ›´æ”¹çš„æ–‡æ¡£
6. æäº¤å¸¦æœ‰æ¸…æ™°æè¿°çš„ Pull Request

## æ€§èƒ½è€ƒè™‘

- **è¿æ¥æ± **: TCP æœåŠ¡å™¨ä½¿ç”¨å·¥ä½œæ± ä¼˜åŒ–è¿æ¥å¤„ç†
- **å†…å­˜ç®¡ç†**: å°½å¯èƒ½ä½¿ç”¨é›¶æ‹·è´æ“ä½œå‡å°‘ GC å‹åŠ›
- **åŠ å¯†**: AES-GCM æ“ä½œé’ˆå¯¹é«˜ååé‡è¿›è¡Œä¼˜åŒ–
- **ä¼šè¯ç®¡ç†**: ä¼šè¯çŠ¶æ€è¢«ç¼“å­˜ä»¥æœ€å°åŒ–æŸ¥æ‰¾å¼€é”€
- **ç¼“å†²åŒºç®¡ç†**: é’ˆå¯¹ä¸åŒå·¥ä½œè´Ÿè½½æ¨¡å¼çš„å¯é…ç½®ç¼“å†²åŒºå¤§å°
- **ä¼˜é›…å…³é—­**: è¿æ¥æ’ç©ºé˜²æ­¢é‡å¯æœŸé—´çš„æ•°æ®ä¸¢å¤±

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [LICENSE](LICENSE) æ–‡ä»¶ä¸­æŒ‡å®šçš„æ¡æ¬¾æˆæƒã€‚
